# 一、概念

1、**主机** host（**端系统** end system）：所有计算机器的统称，通过**通信链路**（communication link）与**分组交换机**相互连接

+ 概念辨析：主机 = 端系统
+ 主机的两大类型：客户（client）和服务器（server）

2、分组交换机：常用类型为路由器（router）和 链路层交换机（link-layer switch）两种，均朝最终目的地转发分组

3、**分组** packet：一台端系统向另一台端系统发送数据时，发送端系统将数据分段并为每段加上首部字节所形成的信息包

4、**路径** path/route：一个分组所经历的一系列通信链路和分组交换机为通过该网络的路径

5、**因特网服务提供商** ISP：一个由多个分组交换机和多段通信链路组成的网络，提供不同类型的网络接入服务

+ 可为内容提供者提供因特网接入服务用于直连
+ 各个ISP相互独立管理

6、**协议** protocol：控制因特网中信息的接收和发送，定义了通信实体间交换、发送和接收报文的**格式**和**顺序**，及报文发送和/或接收一条报文或其他事件所采取的动作。

+ 因特网的主体协议：TCP/IP

7、分布式应用程序 distributed application：涉及多个相互交换数据的端系统的应用程序

8、套接字接口 socket interface:一套发送程序必须遵循的规则集合，规定了交付数据的方式

# 二、The Network Edge

1、接入网

+ 数据用户线（DSL）：从本地电话接入的本地电话公司获得
+ 电缆因特网接入（cable Internet access）：从提供有线电视的公司获得
  + *混合光纤同轴系统（HFC）
+ 光纤到户（FTTH）
+ 以太网、WiFi
+ 4G、LTE（长期演进）

2、物理媒体：成本相对小

+ 导引型媒体：双绞铜线、同轴电缆、光纤
+ 非导引型媒体：无线局域网、数字卫星频道

# 三、The Network Core

## 分组交换 packet switching

1、**存储转发传输** store-and-forward transmission

+ 定义def：在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组

+ 端到端时延（简化式）：
  $$
  d_{端到端} = N\frac LR
  $$
  其中，N：路径条数，R：速率 ，L bit/s：分组大小 bit

2、排队时延和分组丢失

​	对于每条相连的链路，分组交换机具有一个**输出缓存**（ouput buffer），如果已到达分组的链路正在进行另一分组的传输，此时分组承受**排队时延**（queuing delay）；若缓存已占满，新进入的分组出现**丢包**（packet loss）

3、转发表和路由选择协议

​	路由器通过**路由选择协议**（routing protocol）自动设置**转发表**（forwarding table），转发表映射目的地址成为输出链路

## 电路交换 circuit switching

1、def：通信时创建**端到端连接**（end-to-end connection），预留电路**带宽**（bandwidth）并加以维护，尽最大努力实时交付分组

2、实现方式

+ 频分复用（FDM）：在连接期间，链路为每条连接专用一个频段
+ 时分复用（TDM）：时间划分为固定期间的**帧**，每个帧划分为固定数量的**时隙**；当网络跨越一条链路创建一条链接时，网络为每个帧指定一个时隙，并把这些时隙用于该链接的专用传输

### 对比

 分组交换不适合实时服务（原因：端到端时延不可预测），但提供更好的宽带共享、按需分配也较简单经济；电路交换实时传输，但不考虑需求，即便链接处于**静默期**

## 网络的网络

1、ISP的互联模型（P24）

2、一些概念

+ 存在点 PoP：存在于所有层次，提供对接
+ 多宿 multi-home：可与两个或更多提供商连接
+ 对等 peer：层次同一级不进行结算，即无需相互付费
+ 因特网交换点 IXP：一个或多个ISP在此处一起对等
+ *我国国家级ISP：Tian

# 四、分组交换网 Packet-Switched Networks

## 时延

1、总时延：
$$
d_{nodel} = d_{proc} + d_{queue} + d_{trans} + d_{prop}
$$

<center>总时延 = 处理时延 + 排队时延 + 传输时延 + 传播时延


+ 流量强度：用于估计排队时延的范围
  $$
  \frac LR
  $$

​	设计系统的流量强度不能大于1，否则排队时延趋于+∞

2、端到端时延（一般式）
$$
d_{end-end} = N(d_{proc} + d_{trans} + d_{prop})
$$
​	适用情况：各节点具有不同的时延 / 每个节点具有不同的时延和每个节点存在平均排队时延

3、瞬时/平均吞吐量 instantaneous / average throughtout 

+ 瓶颈链路（bottleneck link）：传输速率前大后小（进水管道宽于出水），吞吐量由两者中的较小者决定。因特网连接中，**接入网**是吞吐量的主要限制因素

$$
min\{R_c,R_s\}
$$

# 五、协议层次及其服务模型 Protocol Layers and Their Service Models

## 协议分层

1、优点：概念化 结构化 缺点：单一层可能冗余较低层的功能 违反了层次分离的目标

2、协议栈 protocol stack

+ 5层因特网协议栈：物 链 网 运 应
+ 7层ISO OSI参考模型：物 链 网 运 **会话 表示** 应
  + 表示层：使通讯的应用程序能够解释交换数据的含义
  + 会话层：提供数据交换的**定界**和**同步**功能

3、封装 encapsulation

# *六、Networks Under Attack

1、常见有害程序

+ 僵尸网络（botnet）
+ 病毒
+ 蠕虫

2、针对服务器 / 网络基础设施

+ 弱点攻击
+ 带宽洪泛：短时间大量分组阻塞合法分组到达服务器，如：DDoS攻击
+ 连接洪泛：创建大量伪造的半开/全开的TCP连接，使得主机受困、停止接收合法连接

3、分组嗅探、伪装

+ 分组嗅探器（packet sniffer）：记录每个流经的分组副本的**被动**接收机（不向信道注入信息）。难以发觉，可应用密码学规避
+ IP哄骗（IP Spoofing）：将具有虚假源地址的分组注入因特网（主动），可采用端点鉴别

# *七、History of Computer Networking

+ 分组交换的发展（1961-1972）
  + NCP：ARPAnet端系统间第一台主机-主机协议
+ 专用网络和网络互联 Interneting（1972-1980）
+ 激增和爆炸（1980 - 至今）